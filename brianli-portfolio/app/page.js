"use client";
import { useEffect, useState } from "react";
import Image from "next/image";
import Head from "next/head";
import {
  AiFillGithub,
  AiFillInstagram,
  AiFillLinkedin,
  AiOutlineMail,
} from "react-icons/ai";
import useDarkMode from "@/components/darkmode";
import Header from "@/components/header";
import Timeline from "@/components/timeline";
import Scroller from "@/components/scroller";
import { motion } from "framer-motion";
import SectionHeading from "@/components/sectionheading";

// Used for the image viewing feature
const imageMap = {
  github: "/githubprofile.jpg",
  linkedin: "/linkedinprofile.jpg",
  instagram: "/instagramprofile.png",
  white: "/white.png",
  personalphoto1: "/websitepic1.jpg",
  personalphoto2: "/websitepic5.jpg",
};

export default function Home() {
  const { darkMode } = useDarkMode();
  // This ensures that the component re-renders when darkMode changes
  useEffect(() => {
    // This forces a re-render when darkMode changes
  }, [darkMode]);

  const [photoVisible, setPhotoVisible] = useState(null);
  const [currPhoto, setCurrPhoto] = useState("white");

  return (
    <div
      className={`font-nexa ${darkMode ? "dark" : ""} ${
        darkMode ? "text-white" : "text-slate-700"
      }`}
    >
      <Head>
        <title>Brian Li's Portfolio</title>
        <meta name="description" content="Generated by ajdsfkk"></meta>
        <link rel="icon" href="/favicon.ico" sizes="any" />
      </Head>

      <main className="bg-white px-10 dark:bg-slate-700">
        <motion.section
          className="min-h-screen"
          initial={{ opacity: 0, y: -100 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.175 }}
        >
          <Scroller />
          <Header />
          <div className="flex">
            <div className="ml-10">
              <div className="inline-block max-w-[520px] max-h-[667px] relative overflow-hidden ">
                <Image
                  src={"/websitepic2.jpg"}
                  width={520}
                  height={500}
                  className="object-cover transition-all duration-300 transform hover:scale-110"
                />
              </div>
              <div className="text-5xl flex justify-start gap-28 py-10 text-slate-700">
                <a
                  href="https://github.com/BrianLi23"
                  target="_blank"
                  rel="noopener noreferrer"
                  onMouseEnter={() => setPhotoVisible("github")}
                  onMouseLeave={() => {
                    setPhotoVisible(null);
                    setCurrPhoto("github");
                  }}
                >
                  <AiFillGithub />
                </a>

                <a
                  href="https://www.linkedin.com/in/brian-li2028/"
                  target="_blank"
                  rel="noopener noreferrer"
                  onMouseEnter={() => setPhotoVisible("linkedin")}
                  onMouseLeave={() => {
                    setPhotoVisible(null);
                    setCurrPhoto("linkedin");
                  }}
                >
                  <AiFillLinkedin />
                </a>

                <a
                  href="mailto:b77li@uwaterloo.ca"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <AiOutlineMail />
                </a>

                <a
                  href="https://www.instagram.com/brixn.li/"
                  target="_blank"
                  rel="noopener noreferrer"
                  onMouseEnter={() => setPhotoVisible("instagram")}
                  onMouseLeave={() => {
                    setPhotoVisible(null);
                    setCurrPhoto("instagram");
                  }}
                >
                  <AiFillInstagram />
                </a>
              </div>
            </div>
            <div className="pl-64">
              <div>
                <h2 className="text-5xl py-2">Brian Li</h2>
                <h3 className="text-2xl py-2">Developer, Student, Learner</h3>
                <p
                  className="text-xl py-2 leading-loose "
                  style={{ maxWidth: "600px" }}
                >
                  Hello, my name is{" "}
                  <span
                    onMouseEnter={() => setPhotoVisible("personalphoto1")}
                    onMouseLeave={() => {
                      setPhotoVisible(null);
                      setCurrPhoto("personalphoto1");
                    }}
                    className="underline"
                  >
                    Brian Li,
                  </span>{" "}
                  a first year Computer Engineering student at the University of
                  Waterloo. My passions lie in AI development and firmware
                  tinkering; I'm keen on{" "}
                  <span
                    onMouseEnter={() => setPhotoVisible("personalphoto2")}
                    onMouseLeave={() => {
                      setPhotoVisible(null);
                      setCurrPhoto("personalphoto2");
                    }}
                    className="underline"
                  >
                    connecting with others{" "}
                  </span>
                  and learning new things.
                </p>
              </div>
              <div>
                <Image
                  src={
                    photoVisible ? imageMap[photoVisible] : imageMap[currPhoto]
                  }
                  width={400}
                  height={500}
                  className={`transition-all content-center m-10 mt-15 duration-500 ${
                    imageMap[photoVisible]
                      ? "opacity-100 scale-100 duration-500"
                      : "opacity-0 scale-90 pointer-events-none duration-500"
                  }`}
                />
              </div>
            </div>
          </div>
        </motion.section>
        <SectionHeading>Timeline</SectionHeading>
        <Timeline />
        <SectionHeading>Projects</SectionHeading>
        <SectionHeading>Skills</SectionHeading>
      </main>
    </div>
  );
}
